#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const amira_lambda_parallel_stack_1 = require("../lib/amira-lambda-parallel-stack");
const ssm = require("aws-cdk-lib/aws-ssm");
const app = new cdk.App();
const stack = new amira_lambda_parallel_stack_1.AmiraLambdaParallelStack(app, 'AmiraLambdaParallelStack', {
    env: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: process.env.CDK_DEFAULT_REGION,
    },
});
// Auto-wire parameters from SSM if present
const vpcId = ssm.StringParameter.fromStringParameterAttributes(stack, 'VpcIdParamLookup', { parameterName: '/amira/vpc_id' }).stringValue;
const privateSubnetIdsCsv = ssm.StringParameter.fromStringParameterAttributes(stack, 'VpcPrivateSubnetsLookup', { parameterName: '/amira/vpc_private_subnet_ids' }).stringValue;
const albUrl = ssm.StringParameter.fromStringParameterAttributes(stack, 'TritonAlbUrlLookup', { parameterName: '/amira/triton_alb_url' }).stringValue;
// Synthesize defaults so GitHub Actions doesnâ€™t need to pass them
stack.node.defaultChild.addPropertyOverride('Parameters', {
    TritonClusterUrl: '',
    VpcId: vpcId,
    PrivateSubnetIdsCsv: privateSubnetIdsCsv,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW1pcmEtbGFtYmRhLXBhcmFsbGVsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYW1pcmEtbGFtYmRhLXBhcmFsbGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxtQ0FBbUM7QUFDbkMsb0ZBQThFO0FBQzlFLDJDQUEyQztBQUUzQyxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUMxQixNQUFNLEtBQUssR0FBRyxJQUFJLHNEQUF3QixDQUFDLEdBQUcsRUFBRSwwQkFBMEIsRUFBRTtJQUMxRSxHQUFHLEVBQUU7UUFDSCxPQUFPLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUI7UUFDeEMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCO0tBQ3ZDO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsMkNBQTJDO0FBQzNDLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxlQUFlLENBQUMsNkJBQTZCLENBQUMsS0FBSyxFQUFFLGtCQUFrQixFQUFFLEVBQUUsYUFBYSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDO0FBQzNJLE1BQU0sbUJBQW1CLEdBQUcsR0FBRyxDQUFDLGVBQWUsQ0FBQyw2QkFBNkIsQ0FBQyxLQUFLLEVBQUUseUJBQXlCLEVBQUUsRUFBRSxhQUFhLEVBQUUsK0JBQStCLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQztBQUNoTCxNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDLDZCQUE2QixDQUFDLEtBQUssRUFBRSxvQkFBb0IsRUFBRSxFQUFFLGFBQWEsRUFBRSx1QkFBdUIsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDO0FBRXRKLGtFQUFrRTtBQUNqRSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQTZCLENBQUMsbUJBQW1CLENBQUMsWUFBWSxFQUFFO0lBQzFFLGdCQUFnQixFQUFFLEVBQUU7SUFDcEIsS0FBSyxFQUFFLEtBQUs7SUFDWixtQkFBbUIsRUFBRSxtQkFBbUI7Q0FDekMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuaW1wb3J0ICdzb3VyY2UtbWFwLXN1cHBvcnQvcmVnaXN0ZXInO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCB7IEFtaXJhTGFtYmRhUGFyYWxsZWxTdGFjayB9IGZyb20gJy4uL2xpYi9hbWlyYS1sYW1iZGEtcGFyYWxsZWwtc3RhY2snO1xuaW1wb3J0ICogYXMgc3NtIGZyb20gJ2F3cy1jZGstbGliL2F3cy1zc20nO1xuXG5jb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xuY29uc3Qgc3RhY2sgPSBuZXcgQW1pcmFMYW1iZGFQYXJhbGxlbFN0YWNrKGFwcCwgJ0FtaXJhTGFtYmRhUGFyYWxsZWxTdGFjaycsIHtcbiAgZW52OiB7XG4gICAgYWNjb3VudDogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCxcbiAgICByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTixcbiAgfSxcbn0pO1xuXG4vLyBBdXRvLXdpcmUgcGFyYW1ldGVycyBmcm9tIFNTTSBpZiBwcmVzZW50XG5jb25zdCB2cGNJZCA9IHNzbS5TdHJpbmdQYXJhbWV0ZXIuZnJvbVN0cmluZ1BhcmFtZXRlckF0dHJpYnV0ZXMoc3RhY2ssICdWcGNJZFBhcmFtTG9va3VwJywgeyBwYXJhbWV0ZXJOYW1lOiAnL2FtaXJhL3ZwY19pZCcgfSkuc3RyaW5nVmFsdWU7XG5jb25zdCBwcml2YXRlU3VibmV0SWRzQ3N2ID0gc3NtLlN0cmluZ1BhcmFtZXRlci5mcm9tU3RyaW5nUGFyYW1ldGVyQXR0cmlidXRlcyhzdGFjaywgJ1ZwY1ByaXZhdGVTdWJuZXRzTG9va3VwJywgeyBwYXJhbWV0ZXJOYW1lOiAnL2FtaXJhL3ZwY19wcml2YXRlX3N1Ym5ldF9pZHMnIH0pLnN0cmluZ1ZhbHVlO1xuY29uc3QgYWxiVXJsID0gc3NtLlN0cmluZ1BhcmFtZXRlci5mcm9tU3RyaW5nUGFyYW1ldGVyQXR0cmlidXRlcyhzdGFjaywgJ1RyaXRvbkFsYlVybExvb2t1cCcsIHsgcGFyYW1ldGVyTmFtZTogJy9hbWlyYS90cml0b25fYWxiX3VybCcgfSkuc3RyaW5nVmFsdWU7XG5cbi8vIFN5bnRoZXNpemUgZGVmYXVsdHMgc28gR2l0SHViIEFjdGlvbnMgZG9lc27igJl0IG5lZWQgdG8gcGFzcyB0aGVtXG4oc3RhY2subm9kZS5kZWZhdWx0Q2hpbGQgYXMgY2RrLkNmblN0YWNrKS5hZGRQcm9wZXJ0eU92ZXJyaWRlKCdQYXJhbWV0ZXJzJywge1xuICBUcml0b25DbHVzdGVyVXJsOiAnJyxcbiAgVnBjSWQ6IHZwY0lkLFxuICBQcml2YXRlU3VibmV0SWRzQ3N2OiBwcml2YXRlU3VibmV0SWRzQ3N2LFxufSk7XG4iXX0=
